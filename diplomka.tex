\documentclass[11pt,,oneside]{fithesis}

\usepackage[english]{babel}
\usepackage[cp1250]{inputenc}
\usepackage[IL2]{fontenc}
\usepackage[plainpages=false, pdfpagelabels, hidelinks]{hyperref}
\usepackage{amsmath, amssymb, graphicx, amsthm, amsfonts, enumitem, algpseudocode, algorithmicx, wasysym, fixltx2e, float}

\usepackage[chapter]{algorithm}
\newfloat{algorithm}{t}{lop}
\floatname{algorithm}{Algorithm}
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}
\def\NoNumber#1{{\def\alglinenumber##1{}\State #1}\addtocounter{ALG@line}{-1}}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{example}[thm]{Example}
\newtheorem{corollary}[thm]{Corollary}

\theoremstyle{definition}
\newtheorem{mydef}[thm]{Definition}
\newtheorem{observation}[thm]{Observation}


\thesislang{en}
\thesistitle{Computational Complexity of Patrolling Games on Oriented Graphs}
\thesissubtitle{Diploma Thesis}
\thesisstudent{Mat˙ö Abaffy}
\thesiswoman{false}
\thesisfaculty{fi}
\thesisyear{2014}
\thesisadvisor{doc. RNDr. Tom·ö Br·zdil, Ph.D.}

\begin{document}

\FrontMatter
\ThesisTitlePage

\begin{ThesisDeclaration}
\DeclarationText
\AdvisorName
\end{ThesisDeclaration}

\begin{ThesisThanks}
I would like to thank Blablabla
\end{ThesisThanks}

\begin{ThesisAbstract}
Blablabla
\end{ThesisAbstract}

\begin{ThesisKeyWords}
patrolling games, game theory, complexity, algorithm, oriented graphs, blablabla
\end{ThesisKeyWords}

\MainMatter
\tableofcontents
\pagestyle{plain}

\chapter{Introduction}

Blablabla


\chapter{Basic Patrolling Literature}
In this !!!chapter/section!!!, we give an overview of research in the field of patrolling games in the last years. We address several models. For each model, we state the differences from our model and we mention the most significant results.

GENERAL => holds true unless stated otherwise:

- defender = patroller = robot; attacker = intruder; attack lenght = penetration time

?? (In the rest of the paper, we denote the defender with ìsheî and the attacker with ìheî).

- On directed graphs, distance between any two neighbour nodes is the same.

- Strong adversarial settings (attacker knows the defender's strategy and the current position of patrolling unit(s))

- + single adversary?

- to intercept an attack, the defender has to come to a node where the attack is taking place

\subsection{Perimeter Patrol}
The first reference in almost every robot patrolling paper is \cite{perimeter}. The authors consider a problem of multi-robot patrol around a closed area with the existence of a single adversary trying to enter the area. A real life motivation might be the following scenario. An intruder tries to cross a border while some patrolling units aim to detect this intrusion.

The authors show that in adversial settings non-deterministic defender strategies are needed. They demonstrate it on an example similar to the following situation. A robot moving with velocity ${1m/s}$ is required to patrol around a fence of length 25 meters. Assume that an adversary needs 20 seconds to penetrate the area through the fence. If the robot moves deterministically, in any point of time a fence section of lenght of at least 5 meters will not be visited by the robot in the next 20 seconds. The intruder can guarantee penetration by entering through this section. However, if the robot moves in a non-deterministic way, it can commit to a strategy that does not allow the adversary to penetrate the area with probability one.

In the paper, a circular graph is considered. All nodes of the graph are targets with unified attack length (penetration time). A system consisting of $k$ mobile robots is considered. Robots move simultaneously. The model is ??stochastic/markovian/stationary??, where for each node the robot goes to the right with probability $p$ and to the left with probability ${1 - p}$.\footnote{Two other movement models, where the robot has directionality associated with its movement, are considered. The achieved results, such as polynomial time algorithm for finding the optimal strategy, apply for these models too.} The authors prove that to maximize the probability of penetration detection (\textsf{ppd}), the robots have to be placed uniformly along the cycle and they have to be coordinated, i.e. all robots move together in the same direction. This reduces the problem to a much simpler instance with smaller graph and only one robot. The main result is a polynomial time algorithm which computes the optimal defender's strategy.

Authors' subsequent papers concerning multi-robot perimiter patrol in adversial settings include \cite{perimeter2} and \cite{perimeter3}. In \cite{perimeter2} it is shown that in the case the adversary has no knowledge of the patrol scheme, a deterministic algorithm is optimal. However, the deterministic algorithm creates high deviations between the  \textsf{ppd} values in the nodes and it is easy to detect. Therefore, the authors present an algorithm that deals with adversary having partial information. This algorithm maximizes the expected \textsf{ppd} along with minimizing the deviation between the \textsf{ppd} values throughout the perimeter. Its performance was verified by experiments with human subjects.

\subsection{Arbitrary Graph Topologies}

A more general graph topology is addressed in \cite{arbitrary}. The authors consider a model with a single robot patrolling on an arbitrary directed graph. Not all nodes of the graph are necessarily targets and each target node $i$ requires the intruder ${d_i}$ steps to enter.
The robot is equipped with a sensor able to detect the intruder. The robot's sensing capabilities are represented by a matrix ${V(n \times n)}$ where ${v_{i,j} = 1}$ iff node $j$ can be sensed from node $i$.
% footnote?
The patroller's sensing capabilities in our model are equivalent to the case of $V$ being an identity matrix.

The possible outcomes of the game are defined as follows:
\emph{intruder-capture}, when the intruder attacks some node $i$ and the robot senses $i$ in the next ${d_i}$ steps;
\emph{penetration-i}, when the intruder attacks node $i$ and the robot does not sense $i$ in the next ${d_i}$ steps;
\emph{no-attack}, when the intruder never attacks.
For each possible outcome, patroller's and intruder's payoffs are defined.\footnote{The game is a general-sum game with some consistency constraints over the players' payoffs.} Explicitly, these values are known to both players. However, the model can capture the case when the intruder's preferences over the targets are uncertain to the patroller.

The authors cope with the presence of the infinite horizon in the game by introducing symmetries. They allow the patroller to choose the next action based only on the last ${|H|}$ actions, where ${|H|}$ is finite and constant during all the game. Higher value of ${|H|}$ leads to possibly higher expected utility of the patroller, but also to higher computational complexity for finding the optimal patrolling strategy. The authors provide a multi-bilinear mathematical programming formulation to find the optimal patroller's strategy when ${|H| = 1}$. They state that formulations with ${|H| > 1}$ can be obtained by extending this one.

Further, the paper is concerned in heuristics for more efficient problem solving. In realistic settings the number of targets is significantly smaller than the number of all nodes. That affords opportunity to reduce the programming problems' searching space, the number of variables and constraints.
% use dash instead of comma? "- the number of ..."
First, the authors are interested in a deterministic strategy which detects any attack with probability one. To solve the problem of finding such a strategy, they formulate an integer linear program.
Second, the authors aim to minimize the number of nodes over which the patroller will randomize when using an optimal strategy. They formulate another integer linear program for that.
Third, they introduce the concept of action dominance for the intruder.
For an example setting, the reduction of nodes and the elimination of dominated actions resulted in the following improvement. Both the number of bilinear problems to be solved and the average computational time for solving a single problem decreased from ${29^2}$ to 18 and from more than 30 minutes to less than 5 minutes, respectively.

The rest of the paper discusses the problem of finding an upper bound for ${|H|}$, say ${|\overline{H}|}$, such that there is an optimal strategy, among all the strategies,
% - among all the strategies -
which uses no more than length ${|\overline{H}|}$ of the history, i.e.for any ${|H| > |\overline{H}|}$ the patroller's expected utility keeps constant. Throughout the paper it is claimed that this treshold exists. However, in \cite{iti2} this claim has been proven \emph{incorrect}. Moreover, in \cite{arbitrary} they formulate a theorem that for a fully connected topology, ${|\overline{H}| = 0}$. That is also \emph{incorrect}. The proof sketch is done on a complete graph with 3 nodes, each with attack length 2. The authors prove that their algorithm gives the same expected utility when ${|H| = 0}$ and ${|H| = 1}$. Generalization of any kind is omitted. The highest expected utility when ${|H| = 0}$ is ${5/9}$. However, in \cite{iti1} there is a strategy with ${|H| = 2}$ giving expected utility ${(\sqrt{5} - 1)/2}$, which is strictly greater than ${5/9}$.

The authors extend the model from \cite{arbitrary} to more realistic settings in \cite{powerlessIntruder}. They weaken the intruder in two ways. Their first extension introduces the intruder's movement. The intruder does not appear directly at the target, rather he has to traverse the graph along paths connecting \emph{access areas} to targets. The intruder can move infinitely fast. Covering a path takes only one step during which the intruder can be detected on every node of the path. In their second extension, some cells are hidden to the intruder. As he cannot observe the whole environment, he cannot perfectly know the position of the patroller when attacking. A concept of a \emph{state} is introduced, representing when (how many steps ago) and where (in which node) has the patroller been observed for the last time. For both extensions the authors provide mathematical programming formulations, reduction algorithms and experimental evaluations.

\subsection{Multiple Patrolling Units}

The authors of \cite{arbitrary} generalized their model by introducing multiple patrolling robots in \cite{multi-robot}. On the other hand, they simplified the model in many ways. They assume that the robots' strategy is stochastic, that the robots and the intruder have the same preference ordering over the targets and that the robots can sense only the nodes they are in.

%nejake odsadenie?
%podnadpis Smallest Number of Robots
The first problem addressed in the paper is finding the smallest number of robots needed to capture any attack with probability greater than zero. With a smaller number of robots the intruder could successfully attack with probability one. The authors show that this problem is equivalent to finding the smallest number of maximal cliques such that each target belongs to at least one clique. A simplified idea behind this is the following.
% "the following:" - throughout the document

Let us assume a setting with a graph $G$ and a set of targets $T$. Let $T' \subseteq T$ be a subset of targets. If there is a subgraph $G' \subseteq G$
%such that $T'$ is a subset of nodes of $G'$
%such that for each $t \in T'$ it holds that
%$t$ is a node of $G'$
such that for each $t \in T'$ and for each node $v$ from $G'$ there is a path from $v$ to $t$ in $G'$ of length at most $d_t$, then a single robot can patrol all the targets $T'$. In other words, the robot has a strategy such that in each node of $G'$, for all $t \in T'$ the robot will visit $t$ in at most $d_t$ steps with probability strictly greater than zero.
The goal is to find the smallest set of such subgraphs that would cover all the targets.

The authors build an abstraction $Q$ of the original graph $G$. They formulate an algorithm to find the set of all maximal \emph{labeled cliques} in $Q$
%these cliques represent the beforementioned subgraphs
and a linear program to find the smallest labeled clique cover. The result of the program is the smallest number of robots needed to patrol the environment.

%nejake odsadenie?
%podnadpis Coordination between Robots
The second problem studied in the paper regards the coordination between the robots. The authors consider two coordination dimensions,
%: in computing the patrolling strategy and in partitioning the environment.
each with three possible values.

The first dimension refers to the degree of \emph{coordination in computing the patrolling strategy}, which can be of one of the following types: 

\emph{Joint strategy}: the strategy of each robot depends on its position and on the position of all the other robots.
One strategy regarding the movement of all the robots is computed centrally. The solution contains $O(n^{|R|})$ probability variables, where $n$ is the number of nodes and $|R|$ is the number of robots.

\emph{Disjointed strategies}: the strategy of each robot depends only on its position. The strategy of each robot is computed centrally keeping into account the strategy of all the other robots. The solution contains $O(|R|\cdot n^2)$ probability variables.

\emph{Separated strategies}: each single robot computes its own strategy without considering the strategies or positions of the others. This reduces the multi-robot patrolling problem into a set of $|R|$ single-robot patrolling problems, each with $O(n^2)$ probability variables.

The second dimension refers to the degree of \emph{coordination in partitioning the environment}. Each robot is constrained to move within a portion of $G$ assigned to it. Possible levels of this coordination are:

\emph{Full assignment}: each robot can potentially move in every vertex of $G$.

\emph{Maximal clique assignment}: each robot is assinged a maximal labeled clique (in the abstraction $Q$ of $G$). If the cliques overlap, some targets may be patrolled by multiple robots.

\emph{Separated assignment}: as the previous case, but the cliques assigned to the robots may not overlap (they do not have to be maximal cliques). Therefore, each target is patrolled by only one robot.

In the next part of the paper, the authors combine the two mentioned coordination dimensions together. They show that only some combinations are reasonable. For example, joint strategy with separated assignment can be reduced to separated strategy with separated assignment. That is because robots patrolling separated portions of $G$ do not need to cooperate. A mathematical programming formulation is proposed for each reasonable combination of values.

Experimental results show that the higher the degree of coordination, the higher the computational effort and the robots' utilities.
\footnote{There is one exception to this rule in the case of separated strategies: separated assignment turned out to be more time-consuming and gave higher utilities than maximal clique assignment. This shows that overlapping patrolling areas without any strategy coordination have negative effect on the expected utility.}
An easy observation was that joint strategies do not scale with large settings (more than 15 nodes) as they require much memory.
Special attention was paid to two coordination combinations: disjointed strategy with maximal clique assignment ($\mathcal{D}_3$) and separated strategy with separated assignment ($\mathcal{D}_5$). $\mathcal{D}_5$ consumed less time than $\mathcal{D}_3$ just because the number of possible assignments was small. With larger settings, the number of all the possible separated assignments increases drastically faster than the number of maximal cliques. Another interesting observation is that higher number of robots can lead to lower computational time. That is because adding more robots decreases the portion of $G$ assigned to each robot and the computational time strongly depends on the size of this portion. For more conclusions, see \cite{multi-robot}.

\subsection{Moving targets}

So far, the targets carrying value were static. In \cite{movingTargets}, the authors assume that these valuable targets can change their positions in time. This is motivated by real-world scenarios such as protection of vessels transiting waters with high pirate activity and unmanned aerial vehicle-based surveillance protecting moving ground targets.

The model considered in \cite{movingTargets} is based on the model used in \cite{arbitrary}. It assumes unified attack length and stochastic defender's strategy.
% and identity sensing capabilities matrix.
In addition, targets are allowed to move through the area according to a deterministic movement schedule. This schedule is a fixed property of the environment and is known to both players.

The game is played in $|T|$ turns, thereafter it is repeated \--- i.e. the targets move in cycles. In each turn, the defender can move to an adjacent node and the targets can move to any node. The movement of the targets is defined by an arbitrary function ${f : Q \times T \mapsto V}$, where $Q$ is the set of targets, $T$ is the set of turns and $V$ is the set of nodes.
%vynechat formalizmy a skratit to? "In contrast with the defender, the targets can move to any node, not just the adjacent one."
Note that targets are not nodes anymore, but they are positioned in nodes.
% rather???
To cope with the target movement, the defender's strategy is time-dependent. The defender chooses his next action based not only on his current node but also on the current turn.

The authors formulate a multi-bilinear program to find the optimal defender's strategy.
They experimentally compare the performance of the stationary and time-dependent strategies. They do so in terms of the reached game value and computation time. Evaluation examples have different types of graph structure (grid with holes vs. full grid) and different types of target movement (distance between targets changing or not changing). 
% dat prec zatvorky a ich obsah

The results of the experiment show that in the game with mobile targets time-dependent strategies lead to significantly higher utility value. In the experimental results presented in the paper, time-dependent strategies preceded the stationary ones by approximately 50--300\%. However, the computational time was 10--1000 times larger. The authors concluded that time-dependent strategies are reasonable to be used.

\

A noticeably novel game model called MRMT\textsubscript{sg} (multiple Mobile Resources protecting Moving Targets) was introduced in \cite{line}. In MRMT\textsubscript{sg}, the defender's strategy space is descretized and attacker's strategy space is continuous. A major motivation in the paper is the problem of protecting ferries with fast patrol boats.

The authors consider $L$ targets moving along a one-dimensional domain, specifically a straight line between two points $A$ and $B$. The targets have fixed daily schedules known to both players. The targets move in time continuously between points $A$ and $B$.
%... move continuously ... in time. ???
The defender has $W$ mobile patrollers that can move between $A$ and $B$. All patrollers have a common maximum speed $v_m$ and a protection radius $r_e$. A patroller is \emph{protecting} a target if the distance between them is no more than $r_e$. The attacker chooses a certain time and a certain target to attack. The probability of attack success depends on the positions of the patrollers at that time, i.e. the attack is instant and there is no attack length. This probability is a decreasing function of the number of patrollers protecting the target. An attack on a target can be successful even if there is a patroller protecting the target. The case when an attack on a target is successful iff the target is not protected by any patroller is just a special case.

The authors provide an efficient linear program called CASS (Solver for Continuous Attacker Strategies) to solve  MRMT\textsubscript{sg}. The effiecency of CASS consists in the represention of the defender's strategies as marginal probability variables and in using \emph{sub-interval analysis} to model the attacker's continuous strategy space.


\subsection{?? modularity}

%\subsection{?? alarms}

\subsection{dalsie omacky}






\chapter{Preliminaries}

\section{Basic Definitions}


\begin{mydef}
\emph{Gramatika} $\mathcal{G}$ je ötvorica $(N, \Sigma, P, S)$, kde
\begin{itemize}
	\item $N$ je nepr·zdna koneËn· mnoûina \emph{netermin·lnych symbolov} (Ôalej \emph{netermin·lov}).
	\item $\Sigma$ je koneËn· mnoûina \emph{termin·lnych symbolov} (Ôalej \emph{termin·lov}) tak·, ûe $N \cap \Sigma = \emptyset$. Symbolom $V = N \cup \Sigma$ budeme znaËiù mnoûinu \emph{vöetk˝ch symbolov} gramatiky.
	\item $P \subseteq V^*NV^* \times V^*$ je koneËn· mnoûina \emph{pravidiel}. Pravidlo $(\alpha, \beta)$ obvykle zapisujeme v tvare $\alpha \rightarrow \beta$ a ËÌtame ``$\alpha$ prepÌö na $\beta$''. \emph{ºavou stranou} pravidla $\alpha \rightarrow \beta$ rozumieme jeho prv˙ zloûku ($\alpha$), \emph{pravou stranou} pravidla jeho druh˙ zloûku ($\beta$).
	\item $S \in N$ je öpeci·lny \emph{poËiatoËn˝} netermin·l (naz˝van˝ \emph{koreÚ gramatiky}).
\end{itemize}
\end{mydef}




\chapter{This is the end, my only friend, the end}




\def\us{\char`\_}

\bibliographystyle{plain}
%\bibliography{mujbisoubor}
\begin{thebibliography}{9}

\bibitem{perimeter} N. Agmon, S. Kraus, and G. A. Kaminka. Multi-Robot Perimeter Patrol in Adversarial Settings. In \emph{ICRA}, pages 2339ñ2345, 2008.

\bibitem{perimeter2} N. Agmon, V. Sadov, S. Kraus, and G. A. Kaminka. The Impact of Adversarial Knowledge on Adversarial Planning in Perimeter Patrol. In \emph{AAMAS}, pages 55-62, 2008.

\bibitem{perimeter3} N. Agmon, S. Kraus, G. A. Kaminka, and V. Sadov. Adversarial Uncertainty in Multi-Robot Patrol. In \emph{IJCAI}, pages 1811-1817, 2009.

\bibitem{arbitrary} N. Basilico, N. Gatti, and F. Amigoni. Leader-Follower Strategies for Robotic Patrolling in Environments with Arbitrary Topologies. In \emph{AAMAS}, pages 57-64, 2009.

\bibitem{powerlessIntruder} N. Basilico, N. Gatti, T. Rossi, S. Ceppi, and F. Amigoni. Extending Algorithms for Mobile Robot Patrolling in the Presence of Adversaries to More Realistic Settings. In \emph{WI-IAT}, pages 557-564, 2009.

\bibitem{multi-robot} N. Basilico, N. Gatti, and F. Villa. Asynchronous Multi-Robot Patrolling against Intrusion in Arbitrary Topologies. In \emph{AAAI}, pages 1224-1229, 2010.

\bibitem{movingTargets} B. Boöansk˝, V. Lis˝, M. Jakob, and M. PÏchouËek. Computing Time-Dependent Policies for Patrolling Games with Mobile Targets. In \emph{AAMAS}, pages 989-996, 2011.

\bibitem{line} F. Fang, A. X. Jiang, and M. Tambe. Optimal Patrol Strategy for Protecting Moving Targets with Multiple Mobile Resources. In \emph{AAMAS}, pages 957-964, 2013.

\bibitem{miso} M. Abaffy. Patrolling Games on Graphs [online]. 2013 [cit. 2014-05-10] ??? Diploma thesis. Masaryk University, Faculty of Informatics. Available at $<$http://is.muni.cz/th/321758/fi\texttt{\us}m/$>$.

\bibitem{iti1} M. Abaffy, T. Br·zdil, V. ÿeh·k, B. Boöansk˝, A. KuËera, and J. KrË·l. Solving Adversarial Patrolling Games with Bounded Error. Online: ???

\bibitem{iti2} T. Br·zdil, P. HlinÏn˝, A. KuËera, and V. ÿeh·k. Optimal Strategies in Adversarial Patrolling Games. Online: ???

\bibitem{topolog} Wikipedia: \emph{Topological sorting} [online]. [cit. 2012-05-03]. DostupnÈ~z: $<$http://en.wikipedia.org/wiki/index.php?Topological\texttt{\us}sorting$>$.

\bibitem{zbierka} »ERN¡, I., BARNAT, J., ÿEH¡K, V.: \emph{P¯Ìklady k cviËenÌm - IB102 a IB005} [online]. 2006 [cit. 2012-05-09]. Masarykova univerzita,  Fakulta informatiky. DostupnÈ~z: $<$http://www.fi.muni.cz/usr/kretinsky/afj1.ps$>$

\end{thebibliography}


\appendix
\chapter{Ugly Proofs}



\end{document}